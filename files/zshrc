export ZSH="$HOME/.oh-my-zsh"
export UTILS="$HOME/.utils"

# Set theme
ZSH_THEME="agnoster"

# Configure plugins
plugins=(
    git
    kubectl
    mvn
    zsh-autosuggestions
    docker
    aws
    helm
)

# History configuration
HISTSIZE=10000
SAVEHIST=10000
setopt HIST_EXPIRE_DUPS_FIRST
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_FIND_NO_DUPS
setopt HIST_SAVE_NO_DUPS

# Auto-completion configuration
zstyle ':completion:*' menu select
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'

# Load utilities
for f in $UTILS/*; do 
    if [ -f "$f" ]; then
        source "$f"
    fi
done

# Load Oh My Zsh
source $ZSH/oh-my-zsh.sh

# Custom PATH additions
export PATH="$UTILS/bin:$PATH"
export PATH="$HOME/.local/bin:$PATH"

# Editor preferences
export EDITOR='vim'
export VISUAL='vim'

# AWS CLI auto-completion
if command -v aws_completer &> /dev/null; then
    complete -C aws_completer aws
fi
